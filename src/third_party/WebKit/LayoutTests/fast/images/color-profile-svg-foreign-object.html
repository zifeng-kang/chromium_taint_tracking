<!DOCTYPE html>
<html>
<script src="../../resources/run-after-layout-and-paint.js"/></script>

<!-- There should be no red on this page. -->
<body>
  <object onload="load()" data="resources/color-profile-image-foreign-object.svg" width="480" height="360" type="image/svg+xml">
    <p style="color: red">SVG not supported in this browser</p>
  </object>
</body>

<script>
function load() {
  if (window.testRunner)
    runAfterLayoutAndPaint(changeColorProfile);
}

function changeColorProfile() {
  testRunner.setColorProfile('colorSpin', done);
}

function done() {
  setTimeout(function() { testRunner.notifyDone() }, 0);
}

if (window.testRunner) {
  testRunner.dumpAsTextWithPixelResults();
  testRunner.waitUntilDone();
}
</script>
</html>
